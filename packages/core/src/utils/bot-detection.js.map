{"version":3,"file":"bot-detection.js","sourceRoot":"","sources":["bot-detection.ts"],"names":[],"mappings":";;;AAAA,wDAAwD;AACxD,kFAAkF;AACrE,QAAA,uBAAuB,GAAG;IACrC,4BAA4B;IAC5B,WAAW;IACX,kBAAkB;IAClB,qBAAqB,EAAE,6GAA6G;IACpI,UAAU;IACV,iBAAiB;IACjB,WAAW;IACX,sBAAsB;IACtB,aAAa;IACb,SAAS;IACT,aAAa;IACb,mBAAmB;IACnB,eAAe;IACf,UAAU;IACV,aAAa;IACb,kBAAkB;IAClB,iBAAiB;IACjB,wBAAwB;IACxB,SAAS;IACT,aAAa;IACb,UAAU;IACV,aAAa;IACb,oBAAoB;IACpB,SAAS;IACT,QAAQ;IACR,QAAQ;IACR,UAAU;IACV,WAAW;IACX,WAAW;IACX,UAAU;IACV,gBAAgB;IAChB,UAAU;IACV,UAAU;IACV,UAAU;IACV,OAAO;IACP,gBAAgB;IAChB,UAAU;IACV,YAAY;IACZ,mBAAmB;IACnB,WAAW;IACX,cAAc;IACd,WAAW;IACX,SAAS;IAET,wDAAwD;IACxD,SAAS;IACT,SAAS;IACT,OAAO;IACP,MAAM;IACN,SAAS;IAET,oDAAoD;IACpD,WAAW;IACX,iBAAiB;IAEjB,6CAA6C;IAC7C,YAAY;IACZ,cAAc;IACd,gBAAgB;IAEhB,cAAc;IACd,QAAQ;IACR,eAAe;IACf,cAAc;IACd,eAAe;IAEf,oBAAoB;IACpB,mBAAmB;IACnB,iBAAiB;IACjB,aAAa;IAEb,oBAAoB;IACpB,gBAAgB;IAChB,SAAS;IACT,kFAAkF;IAElF,0CAA0C;IAC1C,uFAAuF;IACvF,yBAAyB;IACzB,eAAe;IACf,aAAa;IACb,kBAAkB;IAClB,oBAAoB;IACpB,gBAAgB;IAChB,oBAAoB;IACpB,mBAAmB;IACnB,WAAW;IACX,aAAa;IACb,uBAAuB;IACvB,gBAAgB;IAChB,sBAAsB;IACtB,iBAAiB;IACjB,uBAAuB;IACvB,YAAY;CACb,CAAA;AAED;;GAEG;AACI,IAAM,WAAW,GAAG,UAAU,EAAsB,EAAE,uBAAsC;IAAtC,wCAAA,EAAA,4BAAsC;IACjG,IAAI,CAAC,EAAE,EAAE,CAAC;QACR,OAAO,KAAK,CAAA;IACd,CAAC;IAED,IAAM,OAAO,GAAG,EAAE,CAAC,WAAW,EAAE,CAAA;IAChC,OAAO,+BAAuB,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;QAC5E,IAAM,cAAc,GAAG,SAAS,CAAC,WAAW,EAAE,CAAA;QAC9C,sCAAsC;QACtC,OAAO,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAA;IAC/C,CAAC,CAAC,CAAA;AACJ,CAAC,CAAA;AAXY,QAAA,WAAW,eAWvB","sourcesContent":["// List of blocked user agent strings that identify bots\n// This is shared between browser and node SDKs to ensure consistent bot detection\nexport const DEFAULT_BLOCKED_UA_STRS = [\n  // Random assortment of bots\n  'amazonbot',\n  'amazonproductbot',\n  'app.hypefactors.com', // Buck, but \"buck\" is too short to be safe to block (https://app.hypefactors.com/media-monitoring/about.htm)\n  'applebot',\n  'archive.org_bot',\n  'awariobot',\n  'backlinksextendedbot',\n  'baiduspider',\n  'bingbot',\n  'bingpreview',\n  'chrome-lighthouse',\n  'dataforseobot',\n  'deepscan',\n  'duckduckbot',\n  'facebookexternal',\n  'facebookcatalog',\n  'http://yandex.com/bots',\n  'hubspot',\n  'ia_archiver',\n  'leikibot',\n  'linkedinbot',\n  'meta-externalagent',\n  'mj12bot',\n  'msnbot',\n  'nessus',\n  'petalbot',\n  'pinterest',\n  'prerender',\n  'rogerbot',\n  'screaming frog',\n  'sebot-wa',\n  'sitebulb',\n  'slackbot',\n  'slurp',\n  'trendictionbot',\n  'turnitin',\n  'twitterbot',\n  'vercel-screenshot',\n  'vercelbot',\n  'yahoo! slurp',\n  'yandexbot',\n  'zoombot',\n\n  // Bot-like words, maybe we should block `bot` entirely?\n  'bot.htm',\n  'bot.php',\n  '(bot;',\n  'bot/',\n  'crawler',\n\n  // Ahrefs: https://ahrefs.com/seo/glossary/ahrefsbot\n  'ahrefsbot',\n  'ahrefssiteaudit',\n\n  // Semrush bots: https://www.semrush.com/bot/\n  'semrushbot',\n  'siteauditbot',\n  'splitsignalbot',\n\n  // AI Crawlers\n  'gptbot',\n  'oai-searchbot',\n  'chatgpt-user',\n  'perplexitybot',\n\n  // Uptime-like stuff\n  'better uptime bot',\n  'sentryuptimebot',\n  'uptimerobot',\n\n  // headless browsers\n  'headlesschrome',\n  'cypress',\n  // we don't block electron here, as many customers use posthog-js in electron apps\n\n  // a whole bunch of goog-specific crawlers\n  // https://developers.google.com/search/docs/advanced/crawling/overview-google-crawlers\n  'google-hoteladsverifier',\n  'adsbot-google',\n  'apis-google',\n  'duplexweb-google',\n  'feedfetcher-google',\n  'google favicon',\n  'google web preview',\n  'google-read-aloud',\n  'googlebot',\n  'googleother',\n  'google-cloudvertexbot',\n  'googleweblight',\n  'mediapartners-google',\n  'storebot-google',\n  'google-inspectiontool',\n  'bytespider',\n]\n\n/**\n * Block various web spiders from executing our JS and sending false capturing data\n */\nexport const isBlockedUA = function (ua: string | undefined, customBlockedUserAgents: string[] = []): boolean {\n  if (!ua) {\n    return false\n  }\n\n  const uaLower = ua.toLowerCase()\n  return DEFAULT_BLOCKED_UA_STRS.concat(customBlockedUserAgents).some((blockedUA) => {\n    const blockedUaLower = blockedUA.toLowerCase()\n    // can't use includes because IE 11 :/\n    return uaLower.indexOf(blockedUaLower) !== -1\n  })\n}\n"]}