{"version":3,"file":"string-coercer.js","sourceRoot":"","sources":["string-coercer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAEA,IAAM,mBAAmB,GACvB,0GAA0G,CAAA;AAE5G;IAAA;IAyBA,CAAC;IAxBC,6BAAK,GAAL,UAAM,KAAc;QAClB,OAAO,OAAO,KAAK,KAAK,QAAQ,CAAA;IAClC,CAAC;IAED,8BAAM,GAAN,UAAO,KAAa,EAAE,GAAoB;;QAClC,IAAA,KAAA,OAAgB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAA,EAAnC,IAAI,QAAA,EAAE,KAAK,QAAwB,CAAA;QAC1C,OAAO;YACL,IAAI,EAAE,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,OAAO;YACrB,KAAK,EAAE,KAAK,aAAL,KAAK,cAAL,KAAK,GAAI,KAAK;YACrB,KAAK,EAAE,MAAA,GAAG,CAAC,kBAAkB,0CAAE,KAAK;YACpC,SAAS,EAAE,IAAI;SAChB,CAAA;IACH,CAAC;IAED,gCAAQ,GAAR,UAAS,SAAiB;QACxB,IAAI,IAAI,GAAG,OAAO,CAAA;QAClB,IAAI,KAAK,GAAG,SAAS,CAAA;QACrB,IAAM,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAA;QACnD,IAAI,MAAM,EAAE,CAAC;YACX,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;YAChB,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;QACnB,CAAC;QACD,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;IACtB,CAAC;IACH,oBAAC;AAAD,CAAC,AAzBD,IAyBC;AAzBY,sCAAa","sourcesContent":["import { ExceptionLike, ErrorTrackingCoercer, CoercingContext } from '../types'\n\nconst ERROR_TYPES_PATTERN =\n  /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i\n\nexport class StringCoercer implements ErrorTrackingCoercer<string> {\n  match(input: unknown): input is string {\n    return typeof input === 'string'\n  }\n\n  coerce(input: string, ctx: CoercingContext): ExceptionLike {\n    const [type, value] = this.getInfos(input)\n    return {\n      type: type ?? 'Error',\n      value: value ?? input,\n      stack: ctx.syntheticException?.stack,\n      synthetic: true,\n    }\n  }\n\n  getInfos(candidate: string): [string, string] {\n    let type = 'Error'\n    let value = candidate\n    const groups = candidate.match(ERROR_TYPES_PATTERN)\n    if (groups) {\n      type = groups[1]\n      value = groups[2]\n    }\n    return [type, value]\n  }\n}\n"]}