{"version":3,"file":"dom-exception-coercer.js","sourceRoot":"","sources":["dom-exception-coercer.ts"],"names":[],"mappings":";;;AACA,iCAA6C;AAE7C;IAAA;IAkCA,CAAC;IAjCC,mCAAK,GAAL,UAAM,GAAY;QAChB,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAA;IACzD,CAAC;IAED,oCAAM,GAAN,UAAO,GAAiB,EAAE,GAAoB;QAC5C,IAAM,QAAQ,GAAG,IAAA,gBAAQ,EAAC,GAAG,CAAC,KAAK,CAAC,CAAA;QAEpC,OAAO;YACL,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;YACvB,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;YACzB,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS;YACvC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS;YAClD,SAAS,EAAE,KAAK;SACjB,CAAA;IACH,CAAC;IAEO,qCAAO,GAAf,UAAgB,SAAuB;QACrC,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,cAAc,CAAA;IACjE,CAAC;IAEO,sCAAQ,GAAhB,UAAiB,GAAiB;QAChC,IAAM,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,cAAc,CAAC,CAAA;QAC7E,IAAM,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,UAAG,IAAI,eAAK,GAAG,CAAC,OAAO,CAAE,CAAC,CAAC,CAAC,IAAI,CAAA;QAC9D,OAAO,OAAO,CAAA;IAChB,CAAC;IAEO,4CAAc,GAAtB,UAAuB,GAAY;QACjC,OAAO,IAAA,iBAAS,EAAC,GAAG,EAAE,cAAc,CAAC,CAAA;IACvC,CAAC;IAEO,wCAAU,GAAlB,UAAmB,GAAY;QAC7B,OAAO,IAAA,iBAAS,EAAC,GAAG,EAAE,UAAU,CAAC,CAAA;IACnC,CAAC;IACH,0BAAC;AAAD,CAAC,AAlCD,IAkCC;AAlCY,kDAAmB","sourcesContent":["import { CoercingContext, ErrorTrackingCoercer, ExceptionLike } from '@/error-tracking/types'\nimport { isBuiltin, isString } from '@/utils'\n\nexport class DOMExceptionCoercer implements ErrorTrackingCoercer<DOMException> {\n  match(err: unknown): err is DOMException {\n    return this.isDOMException(err) || this.isDOMError(err)\n  }\n\n  coerce(err: DOMException, ctx: CoercingContext): ExceptionLike {\n    const hasStack = isString(err.stack)\n\n    return {\n      type: this.getType(err),\n      value: this.getValue(err),\n      stack: hasStack ? err.stack : undefined,\n      cause: err.cause ? ctx.next(err.cause) : undefined,\n      synthetic: false,\n    }\n  }\n\n  private getType(candidate: DOMException) {\n    return this.isDOMError(candidate) ? 'DOMError' : 'DOMException'\n  }\n\n  private getValue(err: DOMException) {\n    const name = err.name || (this.isDOMError(err) ? 'DOMError' : 'DOMException')\n    const message = err.message ? `${name}: ${err.message}` : name\n    return message\n  }\n\n  private isDOMException(err: unknown): err is DOMException {\n    return isBuiltin(err, 'DOMException')\n  }\n\n  private isDOMError(err: unknown): err is DOMException {\n    return isBuiltin(err, 'DOMError')\n  }\n}\n"]}