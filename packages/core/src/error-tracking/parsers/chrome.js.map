{"version":3,"file":"chrome.js","sourceRoot":"","sources":["chrome.ts"],"names":[],"mappings":";AAAA,+FAA+F;AAC/F,0DAA0D;;;;;;;;;;;;;;;;;;;AAG1D,+BAAsD;AACtD,mCAAwD;AAExD,oHAAoH;AACpH,IAAM,mBAAmB,GAAG,wCAAwC,CAAA;AAEpE,+DAA+D;AAC/D,IAAM,WAAW,GACf,4IAA4I,CAAA;AAE9I,IAAM,eAAe,GAAG,+BAA+B,CAAA;AAEvD,8DAA8D;AAC9D,sHAAsH;AACtH,kEAAkE;AAC3D,IAAM,qBAAqB,GAAoB,UAAC,IAAI;IACzD,0EAA0E;IAC1E,IAAM,SAAS,GAAG,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAA4C,CAAA;IAE3F,IAAI,SAAS,EAAE,CAAC;QACR,IAAA,KAAA,OAA0B,SAAS,IAAA,EAAhC,QAAQ,QAAA,EAAE,MAAI,QAAA,EAAE,GAAG,QAAa,CAAA;QACzC,OAAO,IAAA,kBAAW,EAAC,QAAQ,EAAE,uBAAgB,EAAE,CAAC,MAAI,EAAE,CAAC,GAAG,CAAC,CAAA;IAC7D,CAAC;IAED,IAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAoD,CAAA;IAEvF,IAAI,KAAK,EAAE,CAAC;QACV,IAAM,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA,CAAC,gBAAgB;QAE1E,IAAI,MAAM,EAAE,CAAC;YACX,IAAM,QAAQ,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAA4C,CAAA;YAE1F,IAAI,QAAQ,EAAE,CAAC;gBACb,iEAAiE;gBACjE,KAAK,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA,CAAC,MAAM;gBAC7B,KAAK,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA,CAAC,OAAO;gBAC9B,KAAK,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA,CAAC,SAAS;YAClC,CAAC;QACH,CAAC;QAED,kHAAkH;QAClH,oFAAoF;QAC9E,IAAA,KAAA,OAAmB,IAAA,sCAA6B,EAAC,KAAK,CAAC,CAAC,CAAC,IAAI,uBAAgB,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAA,EAAvF,IAAI,QAAA,EAAE,QAAQ,QAAyE,CAAA;QAE9F,OAAO,IAAA,kBAAW,EAAC,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAA;IACxG,CAAC;IAED,OAAM;AACR,CAAC,CAAA;AAjCY,QAAA,qBAAqB,yBAiCjC","sourcesContent":["// This regex matches frames that have no function name (ie. are at the top level of a module).\n// For example \"at http://localhost:5000//script.js:1:126\"\n\nimport { StackLineParser } from '../types'\nimport { createFrame, UNKNOWN_FUNCTION } from './base'\nimport { extractSafariExtensionDetails } from './safari'\n\n// Frames _with_ function names usually look as follows: \"at commitLayoutEffects (react-dom.development.js:23426:1)\"\nconst chromeRegexNoFnName = /^\\s*at (\\S+?)(?::(\\d+))(?::(\\d+))\\s*$/i\n\n// This regex matches all the frames that have a function name.\nconst chromeRegex =\n  /^\\s*at (?:(.+?\\)(?: \\[.+\\])?|.*?) ?\\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i\n\nconst chromeEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/\n\n// Chromium based browsers: Chrome, Brave, new Opera, new Edge\n// We cannot call this variable `chrome` because it can conflict with global `chrome` variable in certain environments\n// See: https://github.com/getsentry/sentry-javascript/issues/6880\nexport const chromeStackLineParser: StackLineParser = (line) => {\n  // If the stack line has no function name, we need to parse it differently\n  const noFnParts = chromeRegexNoFnName.exec(line) as null | [string, string, string, string]\n\n  if (noFnParts) {\n    const [, filename, line, col] = noFnParts\n    return createFrame(filename, UNKNOWN_FUNCTION, +line, +col)\n  }\n\n  const parts = chromeRegex.exec(line) as null | [string, string, string, string, string]\n\n  if (parts) {\n    const isEval = parts[2] && parts[2].indexOf('eval') === 0 // start of line\n\n    if (isEval) {\n      const subMatch = chromeEvalRegex.exec(parts[2]) as null | [string, string, string, string]\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = subMatch[1] // url\n        parts[3] = subMatch[2] // line\n        parts[4] = subMatch[3] // column\n      }\n    }\n\n    // Kamil: One more hack won't hurt us right? Understanding and adding more rules on top of these regexps right now\n    // would be way too time consuming. (TODO: Rewrite whole RegExp to be more readable)\n    const [func, filename] = extractSafariExtensionDetails(parts[1] || UNKNOWN_FUNCTION, parts[2])\n\n    return createFrame(filename, func, parts[3] ? +parts[3] : undefined, parts[4] ? +parts[4] : undefined)\n  }\n\n  return\n}\n"]}