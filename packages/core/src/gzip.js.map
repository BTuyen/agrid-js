{"version":3,"file":"gzip.js","sourceRoot":"","sources":["gzip.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,0CAEC;AAKD,oCAiBC;AA5BD;;;GAGG;AACH,SAAgB,eAAe;IAC7B,OAAO,mBAAmB,IAAI,UAAU,CAAA;AAC1C,CAAC;AAED;;GAEG;AACH,SAAsB,YAAY;wDAAC,KAAa,EAAE,OAAc;;QAAd,wBAAA,EAAA,cAAc;;;;;oBAGtD,UAAU,GAAG,IAAI,IAAI,CAAC,CAAC,KAAK,CAAC,EAAE;wBACnC,IAAI,EAAE,YAAY;qBACnB,CAAC,CAAC,MAAM,EAAE,CAAA;oBAEL,gBAAgB,GAAG,UAAU,CAAC,WAAW,CAAC,IAAI,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAA;oBAGvE,qBAAM,IAAI,QAAQ,CAAC,gBAAgB,CAAC,CAAC,IAAI,EAAE,EAAA;;gBADlD,gGAAgG;gBAChG,sBAAO,SAA2C,EAAA;;;oBAElD,IAAI,OAAO,EAAE,CAAC;wBACZ,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,OAAK,CAAC,CAAA;oBACtD,CAAC;oBACD,sBAAO,IAAI,EAAA;;;;;CAEd","sourcesContent":["/**\n * Older browsers and some runtimes don't support this yet\n * This API (as of 2025-05-07) is not available on React Native.\n */\nexport function isGzipSupported(): boolean {\n  return 'CompressionStream' in globalThis\n}\n\n/**\n * Gzip a string using Compression Streams API if it's available\n */\nexport async function gzipCompress(input: string, isDebug = true): Promise<Blob | null> {\n  try {\n    // Turn the string into a stream using a Blob, and then compress it\n    const dataStream = new Blob([input], {\n      type: 'text/plain',\n    }).stream()\n\n    const compressedStream = dataStream.pipeThrough(new CompressionStream('gzip'))\n\n    // Using a Response to easily extract the readablestream value. Decoding into a string for fetch\n    return await new Response(compressedStream).blob()\n  } catch (error) {\n    if (isDebug) {\n      console.error('Failed to gzip compress data', error)\n    }\n    return null\n  }\n}\n"]}